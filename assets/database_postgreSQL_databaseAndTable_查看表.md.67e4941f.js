import{_ as s,o as a,c as e,R as n}from"./chunks/framework.333b51ca.js";const u=JSON.parse('{"title":"在 PostgreSQL 中查看表的定义或结构","description":"","frontmatter":{},"headers":[],"relativePath":"database/postgreSQL/databaseAndTable/查看表.md","filePath":"database/postgreSQL/databaseAndTable/查看表.md","lastUpdated":1689061386000}'),l={name:"database/postgreSQL/databaseAndTable/查看表.md"},o=n(`<h1 id="在-postgresql-中查看表的定义或结构" tabindex="-1">在 PostgreSQL 中查看表的定义或结构 <a class="header-anchor" href="#在-postgresql-中查看表的定义或结构" aria-label="Permalink to &quot;在 PostgreSQL 中查看表的定义或结构&quot;">​</a></h1><p>本文介绍了在 PostgreSQL 查看数据表的定义或结构的两种方法。</p><p>PostgreSQL 提供了两种方法查看一个现有的表的定义或者结构：</p><ul><li>在 <code>psql</code> 工具中使用 <code>\\d</code> 或者 <code>\\d+</code> 列出当前数据库中的所有的表。</li><li>从 <code>information_schema.columns</code> 中查询表中的列。</li></ul><h2 id="使用-d-查看表的信息" tabindex="-1">使用 <code>\\d</code> 查看表的信息 <a class="header-anchor" href="#使用-d-查看表的信息" aria-label="Permalink to &quot;使用 \`\\d\` 查看表的信息&quot;">​</a></h2><p>本实例演示了使用 <code>psql</code> 工具登录数据库并查看表信息的详细步骤。请按照如下步骤进行：</p><ol><li><p>使用 postgres 用户登录 PostgreSQL 服务器：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">~</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> psql -U postgres</span></span>
<span class="line"><span style="color:#FFCB6B;">psql</span><span style="color:#A6ACCD;"> (14.4)</span></span>
<span class="line"><span style="color:#FFCB6B;">Type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">help</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">help.</span></span></code></pre></div><p>注意：您也可以使用其他任何具有相应的数据库权限的用户登录。</p></li><li><p>使用以下语句选择 <code>testdb</code> 数据库：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">\\c testdb;</span></span></code></pre></div><p>如果还未创建数据库，请先运行如下语句：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATABASE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">testdb</span><span style="color:#A6ACCD;">;</span></span></code></pre></div></li><li><p>以下语句使用 <code>\\d</code> 命令查看 <code>test_date</code> 表的结构，如下：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">\\d test_date</span></span></code></pre></div><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Table &quot;public.test_date&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">   Column   |  Type   | Collation | Nullable |           Default</span></span>
<span class="line"><span style="color:#A6ACCD;">------------+---------+-----------+----------+------------------------------</span></span>
<span class="line"><span style="color:#A6ACCD;"> id         | integer |           | not null | generated always as identity</span></span>
<span class="line"><span style="color:#A6ACCD;"> date_value | date    |           | not null | CURRENT_DATE</span></span>
<span class="line"><span style="color:#A6ACCD;"> Indexes:</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;test_date_pkey&quot; PRIMARY KEY, btree (id)</span></span></code></pre></div><p>您可以看到，<code>\\d</code> 输出了表的名字、表中的列，表中的约束等信息。</p></li><li><p>如果要查看更多关于 <code>test_date</code> 表的信息，请使用 <code>\\d+</code> 命令，如下：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">\\d</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> test_date</span></span></code></pre></div><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Table &quot;public.test_date&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">   Column   |  Type   | Collation | Nullable |           Default            | Storage | Compression | Stats target | Description</span></span>
<span class="line"><span style="color:#A6ACCD;">------------+---------+-----------+----------+------------------------------+---------+-------------+--------------+-------------</span></span>
<span class="line"><span style="color:#A6ACCD;"> id         | integer |           | not null | generated always as identity | plain   |             |              |</span></span>
<span class="line"><span style="color:#A6ACCD;"> date_value | date    |           | not null | CURRENT_DATE                 | plain   |             |              |</span></span>
<span class="line"><span style="color:#A6ACCD;"> Indexes:</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;test_date_pkey&quot; PRIMARY KEY, btree (id)</span></span>
<span class="line"><span style="color:#A6ACCD;"> Access method: heap</span></span></code></pre></div><p>您可以看到， <code>\\d+</code> 的输入比 <code>\\d</code> 输出多了 <code>Compression</code>, <code>Stats target</code> 和 <code>Description</code> 列。</p></li></ol><h2 id="从-information-schema-中查看表中的所有列" tabindex="-1">从 information_schema 中查看表中的所有列 <a class="header-anchor" href="#从-information-schema-中查看表中的所有列" aria-label="Permalink to &quot;从 information_schema 中查看表中的所有列&quot;">​</a></h2><p><code>information_schema</code> 是一个系统级的 Schema, 其中提供了一些视图可以查看表、列、索引、函数等信息。</p><p>该 <code>information_schema.columns</code> 目录包含有关所有表的列的信息。</p><p>以下语句从 <code>information_schema.columns</code> 中查询 <code>test_date</code> 表的所有的列：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span></span>
<span class="line"><span style="color:#A6ACCD;">   table_name,</span></span>
<span class="line"><span style="color:#A6ACCD;">   column_name,</span></span>
<span class="line"><span style="color:#A6ACCD;">   data_type,</span></span>
<span class="line"><span style="color:#A6ACCD;">   column_default</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span></span>
<span class="line"><span style="color:#A6ACCD;">   information_schema.columns</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span></span>
<span class="line"><span style="color:#A6ACCD;">   table_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">test_date</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">table_name | column_name | data_type | column_default</span></span>
<span class="line"><span style="color:#A6ACCD;">------------+-------------+-----------+----------------</span></span>
<span class="line"><span style="color:#A6ACCD;"> test_date  | id          | integer   |</span></span>
<span class="line"><span style="color:#A6ACCD;"> test_date  | date_value  | date      | CURRENT_DATE</span></span>
<span class="line"><span style="color:#A6ACCD;">(2 rows)</span></span></code></pre></div><p>以上语句返回了 <code>test_date</code> 表的所有的列的信息，包括 列名，数据类型，默认值。</p><h2 id="结论" tabindex="-1">结论 <a class="header-anchor" href="#结论" aria-label="Permalink to &quot;结论&quot;">​</a></h2><p>PostgreSQL 提供了两种方法查看一个现有的表的定义或者结构：</p><ul><li>在 <code>psql</code> 工具中使用 <code>\\d</code> 或者 <code>\\d+</code> 列出当前当前数据库中的所有的表。</li><li>从 <code>information_schema.columns</code> 中查询表中的列。</li></ul>`,17),t=[o];function p(c,i,d,r,C,A){return a(),e("div",null,t)}const m=s(l,[["render",p]]);export{u as __pageData,m as default};
