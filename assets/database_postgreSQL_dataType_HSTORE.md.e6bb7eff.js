import{_ as s,o as a,c as o,R as n}from"./chunks/framework.318fa179.js";const i=JSON.parse('{"title":"PostgreSQL HSTORE 数据类型介绍","description":"","frontmatter":{},"headers":[],"relativePath":"database/postgreSQL/dataType/HSTORE.md","filePath":"database/postgreSQL/dataType/HSTORE.md","lastUpdated":1689663255000}'),l={name:"database/postgreSQL/dataType/HSTORE.md"},p=n(`<h1 id="postgresql-hstore-数据类型介绍" tabindex="-1">PostgreSQL HSTORE 数据类型介绍 <a class="header-anchor" href="#postgresql-hstore-数据类型介绍" aria-label="Permalink to &quot;PostgreSQL HSTORE 数据类型介绍&quot;">​</a></h1><p>PostgreSQL <code>HSTORE</code> 数据类型用于存储键值对类型的数据。</p><p>PostgreSQL 允许您使用 <code>HSTORE</code> 类型存储键值对数据类型，类似于 <a href="./JSON.html">JSON 对象</a>。</p><p>PostgreSQL <code>HSTORE</code> 数据类型很适合存储无规则的字典值，比如电子产品的属性，服装的规格等。</p><p>PostgreSQL <code>HSTORE</code> 数据类型在 hstore 模块中实现。要使用 PostgreSQL <code>HSTORE</code> 类型，请使用如下语句启用 PostgreSQL hstore 扩展：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> EXTENSION hstore;</span></span></code></pre></div><h2 id="postgresql-hstore-语法" tabindex="-1">PostgreSQL <code>HSTORE</code> 语法 <a class="header-anchor" href="#postgresql-hstore-语法" aria-label="Permalink to &quot;PostgreSQL \`HSTORE\` 语法&quot;">​</a></h2><p>要创建一个 <code>HSTORE</code> 数据类型的列，请使用如下语法：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">column_name HSTORE column_constraint</span></span></code></pre></div><p><code>HSTORE</code> 数据类型的值采用如下的格式：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">key1=&gt;value1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">[, &quot;key2=&gt;value2&quot;, ...]</span></span></code></pre></div><p>这里：</p><ul><li><code>&quot;key1=&gt;value1&quot;</code> 是一个键值对。 如果键和值中不包含空格，可以省略双引号。</li><li>多个键值对之间使用逗号分隔。</li><li>键和值都是文本值。</li></ul><h2 id="postgresql-hstore-实例" tabindex="-1">PostgreSQL <code>HSTORE</code> 实例 <a class="header-anchor" href="#postgresql-hstore-实例" aria-label="Permalink to &quot;PostgreSQL \`HSTORE\` 实例&quot;">​</a></h2><p>使用下面的语句<a href="/database/postgreSQL/databaseAndTable/创建表.html">创建一个新表</a>，名称为 <code>product</code>:</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">product</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">  id </span><span style="color:#C792EA;">INT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">GENERATED</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ALWAYS</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">IDENTITY</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  product_name </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NOT NULL</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  attributes HSTORE</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span></code></pre></div><p><code>product</code> 表存储一个在线商城的产品，它由三列组成：</p><ol><li><code>id</code> 列是标识每行的<a href="/database/postgreSQL/databaseAndTable/主键.html">主键列</a>，它是一个<a href="/database/postgreSQL/databaseAndTable/标识列.html">标识列</a>。</li><li><code>product_name</code> 列存储产品的名称，它的类型是 <a href="./字符类型.html"><code>VARCHAR</code></a>。</li><li><code>attributes</code> 列是 <code>HSTORE</code> 数据类型，它不能为 null。</li></ol><p>产品的属性是多样的，很适合使用 <code>HSTORE</code> 数据类型，比如：</p><ul><li>电脑产品具有 CPU，内存，硬盘，品牌，外观等属性</li><li>服装产品具有 季节，款式，性别，品牌，颜色等属性。</li></ul><h3 id="插入-hstore-数据" tabindex="-1">插入 <code>HSTORE</code> 数据 <a class="header-anchor" href="#插入-hstore-数据" aria-label="Permalink to &quot;插入 \`HSTORE\` 数据&quot;">​</a></h3><p>要将数据插入 <code>HSTORE</code> 列，您必须确保数据采用正确的格式。以下 <a href="/database/postgreSQL/base/INSERT.html"><code>INSERT</code></a> 语句向 <code>product</code> 表中插入几个新行。</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">INSERT INTO</span><span style="color:#A6ACCD;"> product (product_name, attributes)</span></span>
<span class="line"><span style="color:#F78C6C;">VALUES</span></span>
<span class="line"><span style="color:#A6ACCD;">  (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Computer A</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">CPU=&gt;2.5, Memory=&gt;16G, Disk=&gt;1T</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">  (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Shirt B</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Season=&gt;Spring, Style=&gt;Business, Color=&gt;White</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">RETURNING </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">product_name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">                        </span><span style="color:#FFCB6B;">attributes</span></span>
<span class="line"><span style="color:#FFCB6B;">----+--------------+-----------------------------------------------------------</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Computer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">A</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">&quot;CPU&quot;</span><span style="color:#A6ACCD;">=&gt;</span><span style="color:#FFCB6B;">&quot;2.5&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Disk</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1T</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Memory</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">16G</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Shirt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">B</span><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">&quot;Color&quot;</span><span style="color:#A6ACCD;">=&gt;</span><span style="color:#FFCB6B;">&quot;White&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Style</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Business</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Season</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Spring</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rows</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h3 id="查询-hstore-数据" tabindex="-1">查询 <code>HSTORE</code> 数据 <a class="header-anchor" href="#查询-hstore-数据" aria-label="Permalink to &quot;查询 \`HSTORE\` 数据&quot;">​</a></h3><p>要查询 <code>HSTORE</code> 数据，请使用如下 <a href="/database/postgreSQL/base/select.html"><code>SELECT</code></a> 语句：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> product;</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">product_name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">                        </span><span style="color:#FFCB6B;">attributes</span></span>
<span class="line"><span style="color:#FFCB6B;">----+--------------+-----------------------------------------------------------</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Computer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">A</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">&quot;CPU&quot;</span><span style="color:#A6ACCD;">=&gt;</span><span style="color:#FFCB6B;">&quot;2.5&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Disk</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1T</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Memory</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">16G</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Shirt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">B</span><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">&quot;Color&quot;</span><span style="color:#A6ACCD;">=&gt;</span><span style="color:#FFCB6B;">&quot;White&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Style</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Business</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Season</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Spring</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rows</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>如果要查询 <code>HSTORE</code> 数据特定的键值，请使用 <code>-&gt;</code> 运算符或者 <code>column_name[&#39;key_name&#39;]</code> 语法，如下：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span></span>
<span class="line"><span style="color:#A6ACCD;">  id,</span></span>
<span class="line"><span style="color:#A6ACCD;">  product_name,</span></span>
<span class="line"><span style="color:#A6ACCD;">  attributes </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Memory</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> memory,</span></span>
<span class="line"><span style="color:#A6ACCD;">  attributes[&#39;Disk&#39;] </span><span style="color:#F78C6C;">disk</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> product;</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">product_name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">memory</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">disk</span></span>
<span class="line"><span style="color:#FFCB6B;">----+--------------+--------+--------</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Computer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">A</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">16G</span><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">1T</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Shirt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">B</span><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">null&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">null&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rows</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>要在 <a href="/database/postgreSQL/base/WHERE.html"><code>WHERE</code></a> 条件中使用 <code>HSTORE</code> 数据的键值，请使用 <code>column_name[&#39;key_name&#39;]</code> 语法：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> product</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> attributes[&#39;Memory&#39;] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">16G</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">product_name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">                 </span><span style="color:#FFCB6B;">attributes</span></span>
<span class="line"><span style="color:#FFCB6B;">----+--------------+---------------------------------------------</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Computer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">A</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">&quot;CPU&quot;</span><span style="color:#A6ACCD;">=&gt;</span><span style="color:#FFCB6B;">&quot;2.5&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Disk</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1T</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Memory</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">16G</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">row</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>要检查 <code>HSTORE</code> 数据中是否包含一个特定的键值，请使用 <code>?</code> 运算符，如下：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> product</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> attributes ? </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Color</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">product_name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">                        </span><span style="color:#FFCB6B;">attributes</span></span>
<span class="line"><span style="color:#FFCB6B;">----+--------------+-----------------------------------------------------------</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Shirt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">B</span><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">&quot;Color&quot;</span><span style="color:#A6ACCD;">=&gt;</span><span style="color:#FFCB6B;">&quot;White&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Style</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Business</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Season</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Spring</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">row</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>或者使用 <a href="/database/postgreSQL/base/IS_NULL.html"><code>IS NOT NULL</code></a> 运算符，如下：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> product</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> attributes[&#39;Color&#39;] </span><span style="color:#F78C6C;">IS NOT NULL</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">product_name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">                        </span><span style="color:#FFCB6B;">attributes</span></span>
<span class="line"><span style="color:#FFCB6B;">----+--------------+-----------------------------------------------------------</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Shirt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">B</span><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">&quot;Color&quot;</span><span style="color:#A6ACCD;">=&gt;</span><span style="color:#FFCB6B;">&quot;White&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Style</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Business</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Season</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Spring</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">row</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h3 id="将键值对添加到-hstore-数据" tabindex="-1">将键值对添加到 <code>HSTORE</code> 数据 <a class="header-anchor" href="#将键值对添加到-hstore-数据" aria-label="Permalink to &quot;将键值对添加到 \`HSTORE\` 数据&quot;">​</a></h3><p>要将键值对添加到 <code>HSTORE</code> 数据，使用该 <a href="/database/postgreSQL/base/UPDATE.html"><code>UPDATE</code></a> 语句：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">UPDATE</span><span style="color:#A6ACCD;"> product</span></span>
<span class="line"><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> attributes[&#39;Brand&#39;] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">HP</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">RETURNING </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">product_name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">                         </span><span style="color:#FFCB6B;">attributes</span></span>
<span class="line"><span style="color:#FFCB6B;">----+--------------+------------------------------------------------------------</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Computer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">A</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">&quot;CPU&quot;</span><span style="color:#A6ACCD;">=&gt;</span><span style="color:#FFCB6B;">&quot;2.5&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Disk</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1T</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Brand</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">HP</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Memory</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">16G</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">row</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h3 id="删除-hstore-数据中的键值对" tabindex="-1">删除 <code>HSTORE</code> 数据中的键值对 <a class="header-anchor" href="#删除-hstore-数据中的键值对" aria-label="Permalink to &quot;删除 \`HSTORE\` 数据中的键值对&quot;">​</a></h3><p>要从 <code>HSTORE</code> 数据中删除已有的键值对，使用 <a href="/database/postgreSQL/base/UPDATE.html"><code>UPDATE</code></a> 语句 和 <code>delete()</code> 函数：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">UPDATE</span><span style="color:#A6ACCD;"> product</span></span>
<span class="line"><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> attributes </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;">(attributes, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">brand</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">RETURNING </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">product_name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">                 </span><span style="color:#FFCB6B;">attributes</span></span>
<span class="line"><span style="color:#FFCB6B;">----+--------------+---------------------------------------------</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Computer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">A</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">&quot;CPU&quot;</span><span style="color:#A6ACCD;">=&gt;</span><span style="color:#FFCB6B;">&quot;2.5&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Disk</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1T</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Memory</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">16G</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">row</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h3 id="更新-hstore-数据中的键值" tabindex="-1">更新 <code>HSTORE</code> 数据中的键值 <a class="header-anchor" href="#更新-hstore-数据中的键值" aria-label="Permalink to &quot;更新 \`HSTORE\` 数据中的键值&quot;">​</a></h3><p>要更新 <code>HSTORE</code> 数据中的键值，使用该 <a href="/database/postgreSQL/base/UPDATE.html"><code>UPDATE</code></a>语句：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">UPDATE</span><span style="color:#A6ACCD;"> product</span></span>
<span class="line"><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> attributes[&#39;Brand&#39;] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Dell</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">RETURNING </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">product_name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">                          </span><span style="color:#FFCB6B;">attributes</span></span>
<span class="line"><span style="color:#FFCB6B;">----+--------------+--------------------------------------------------------------</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Computer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">A</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">&quot;CPU&quot;</span><span style="color:#A6ACCD;">=&gt;</span><span style="color:#FFCB6B;">&quot;2.5&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Disk</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1T</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Brand</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Dell</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Memory</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">16G</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">row</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h2 id="结论" tabindex="-1">结论 <a class="header-anchor" href="#结论" aria-label="Permalink to &quot;结论&quot;">​</a></h2><p>PostgreSQL <code>HSTORE</code> 数据类型用于存储键值对类型的数据。</p>`,54),e=[p];function t(c,r,C,D,y,F){return a(),o("div",null,e)}const d=s(l,[["render",t]]);export{i as __pageData,d as default};
