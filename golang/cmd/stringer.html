<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.62">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/img/logo.png"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><script data-ad-client="ca-pub-1562813649031072" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><title>stringer | 首页</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-e0f39699.css" as="style"><link rel="stylesheet" href="/assets/style-e0f39699.css">
    <link rel="modulepreload" href="/assets/app-aae02a9f.js"><link rel="modulepreload" href="/assets/stringer.html-15e19257.js"><link rel="modulepreload" href="/assets/stringer.html-8439e7a2.js"><link rel="prefetch" href="/assets/index.html-c13ba13c.js" as="script"><link rel="prefetch" href="/assets/index.html-ac24a345.js" as="script"><link rel="prefetch" href="/assets/时序图.html-7cf42b6a.js" as="script"><link rel="prefetch" href="/assets/index.html-070be700.js" as="script"><link rel="prefetch" href="/assets/基础.html-2be12934.js" as="script"><link rel="prefetch" href="/assets/抽象语法树ast库使用.html-a84447a8.js" as="script"><link rel="prefetch" href="/assets/index.html-813fe462.js" as="script"><link rel="prefetch" href="/assets/READMIN.html-2a428420.js" as="script"><link rel="prefetch" href="/assets/ES检索原理分析.html-8969a25b.js" as="script"><link rel="prefetch" href="/assets/ES高级查询.html-6c64f000.js" as="script"><link rel="prefetch" href="/assets/GOLANG操作ES.html-6d49b368.js" as="script"><link rel="prefetch" href="/assets/index.html-c6ae131c.js" as="script"><link rel="prefetch" href="/assets/es安装与使用.html-955c7c66.js" as="script"><link rel="prefetch" href="/assets/kibana安装与使用.html-4ffb72d8.js" as="script"><link rel="prefetch" href="/assets/基础功能.html-385183c5.js" as="script"><link rel="prefetch" href="/assets/批量操作.html-2ef68ebd.js" as="script"><link rel="prefetch" href="/assets/索引模版.html-16aebd60.js" as="script"><link rel="prefetch" href="/assets/index.html-b6622fdd.js" as="script"><link rel="prefetch" href="/assets/代写文书使用帮助.html-9647bbd0.js" as="script"><link rel="prefetch" href="/assets/代写法律文书.html-af9390a8.js" as="script"><link rel="prefetch" href="/assets/环境依赖.html-4bb6bfd8.js" as="script"><link rel="prefetch" href="/assets/index.html-ff38b3f6.js" as="script"><link rel="prefetch" href="/assets/golang1.html-309adcaa.js" as="script"><link rel="prefetch" href="/assets/index.html-7a59f388.js" as="script"><link rel="prefetch" href="/assets/index.html-ce87c1bb.js" as="script"><link rel="prefetch" href="/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/assets/index.html-6dfc771a.js" as="script"><link rel="prefetch" href="/assets/index.html-3d58802d.js" as="script"><link rel="prefetch" href="/assets/时序图.html-fc404c76.js" as="script"><link rel="prefetch" href="/assets/index.html-9e1c0371.js" as="script"><link rel="prefetch" href="/assets/基础.html-48e313c0.js" as="script"><link rel="prefetch" href="/assets/抽象语法树ast库使用.html-ed29d12e.js" as="script"><link rel="prefetch" href="/assets/index.html-41652726.js" as="script"><link rel="prefetch" href="/assets/READMIN.html-ce3f3534.js" as="script"><link rel="prefetch" href="/assets/ES检索原理分析.html-c4fb5f19.js" as="script"><link rel="prefetch" href="/assets/ES高级查询.html-e626279b.js" as="script"><link rel="prefetch" href="/assets/GOLANG操作ES.html-4af674c6.js" as="script"><link rel="prefetch" href="/assets/index.html-774b349f.js" as="script"><link rel="prefetch" href="/assets/es安装与使用.html-b99d421d.js" as="script"><link rel="prefetch" href="/assets/kibana安装与使用.html-38bb5a4f.js" as="script"><link rel="prefetch" href="/assets/基础功能.html-d167d558.js" as="script"><link rel="prefetch" href="/assets/批量操作.html-0afbea4f.js" as="script"><link rel="prefetch" href="/assets/索引模版.html-095f737b.js" as="script"><link rel="prefetch" href="/assets/index.html-22b63df6.js" as="script"><link rel="prefetch" href="/assets/代写文书使用帮助.html-151225c7.js" as="script"><link rel="prefetch" href="/assets/代写法律文书.html-bff77e24.js" as="script"><link rel="prefetch" href="/assets/环境依赖.html-7d51a036.js" as="script"><link rel="prefetch" href="/assets/index.html-11c7798f.js" as="script"><link rel="prefetch" href="/assets/golang1.html-c52dcace.js" as="script"><link rel="prefetch" href="/assets/index.html-f93630c4.js" as="script"><link rel="prefetch" href="/assets/index.html-58f19422.js" as="script"><link rel="prefetch" href="/assets/404.html-16c10a2c.js" as="script"><link rel="prefetch" href="/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/assets/index-d20b7d60.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/img/logo.png" alt="首页"><span class="site-name can-hide">首页</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具软件"><span class="title">工具软件</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具软件"><span class="title">工具软件</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/tool/git" class="" aria-label="GIT"><!--[--><!--]--> GIT <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="golang"><span class="title">golang</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="golang"><span class="title">golang</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/golang/cmd/stringer" class="router-link-active" aria-label="cmd工具"><!--[--><!--]--> cmd工具 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/golang/tool/" class="" aria-label="工具包"><!--[--><!--]--> 工具包 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/database/mongodb/" class="" aria-label="Mongodb"><!--[--><!--]--> Mongodb <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/mysql/" class="" aria-label="Mysql"><!--[--><!--]--> Mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/redis/" class="" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/elasticsearch/" class="" aria-label="Elasticsearch"><!--[--><!--]--> Elasticsearch <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="产品设计"><span class="title">产品设计</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="产品设计"><span class="title">产品设计</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/productDesgin/uml/时序图.md" class="" aria-label="UML"><!--[--><!--]--> UML <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具软件"><span class="title">工具软件</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具软件"><span class="title">工具软件</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/tool/git" class="" aria-label="GIT"><!--[--><!--]--> GIT <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="golang"><span class="title">golang</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="golang"><span class="title">golang</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/golang/cmd/stringer" class="router-link-active" aria-label="cmd工具"><!--[--><!--]--> cmd工具 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/golang/tool/" class="" aria-label="工具包"><!--[--><!--]--> 工具包 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/database/mongodb/" class="" aria-label="Mongodb"><!--[--><!--]--> Mongodb <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/mysql/" class="" aria-label="Mysql"><!--[--><!--]--> Mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/redis/" class="" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/elasticsearch/" class="" aria-label="Elasticsearch"><!--[--><!--]--> Elasticsearch <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="产品设计"><span class="title">产品设计</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="产品设计"><span class="title">产品设计</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/productDesgin/uml/时序图.md" class="" aria-label="UML"><!--[--><!--]--> UML <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a aria-current="page" href="/golang/cmd/stringer.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="stringer"><!--[--><!--]--> stringer <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/golang/cmd/stringer.html#介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/golang/cmd/stringer.html#安装stringer" class="router-link-active router-link-exact-active sidebar-item" aria-label="安装stringer"><!--[--><!--]--> 安装stringer <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/golang/cmd/stringer.html#参数说明" class="router-link-active router-link-exact-active sidebar-item" aria-label="参数说明"><!--[--><!--]--> 参数说明 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/golang/cmd/stringer.html#使用案例" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用案例"><!--[--><!--]--> 使用案例 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/golang/cmd/stringer.html#简单案例" class="router-link-active router-link-exact-active sidebar-item" aria-label="简单案例"><!--[--><!--]--> 简单案例 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/golang/cmd/stringer.html#使用注释" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用注释"><!--[--><!--]--> 使用注释 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/golang/cmd/stringer.html#去掉常量名前缀" class="router-link-active router-link-exact-active sidebar-item" aria-label="去掉常量名前缀"><!--[--><!--]--> 去掉常量名前缀 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/golang/cmd/stringer.html#总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="stringer" tabindex="-1"><a class="header-anchor" href="#stringer" aria-hidden="true">#</a> stringer</h1><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h2><p>Stringer is a tool to automate the creation of methods that satisfy the fmt.Stringer interface. Given the name of a (signed or unsigned) integer type T that has constants defined, stringer will create a new self-contained Go source file implementing.</p><p>Stringer是一个自动创建满足fmt.Stringer接口的方法的工具。给定定义了常量（有符号或无符号）整数类型T的名称，stringer将创建一个新的自包含Go源文件实现。</p><p>The file is created in the same package and directory as the package that defines T. It has helpful defaults designed for use with go generate.</p><p>该文件与定义T的软件包在同一个软件包和目录中创建。它具有用于go generate的有用默认值。</p><p>Stringer works best with constants that are consecutive values such as created using iota, but creates good code regardless. In the future it might also provide custom support for constant sets that are bit patterns.</p><p>Stringer最适用于连续值的常量，例如使用iota创建的常量，但无论如何都会创建良好的代码。将来，它还可能为位模式的常量集提供自定义支持。</p><h2 id="安装stringer" tabindex="-1"><a class="header-anchor" href="#安装stringer" aria-hidden="true">#</a> 安装stringer</h2><p>stringer命令不是go安装包自带的，所以需要手动安装</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 下载命令</span>
go get golang.org/x/tools/cmd/stringer

<span class="token comment"># 安装命令</span>
go <span class="token function">install</span> golang.org/x/tools/cmd/stringer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>stringer所在目录，需要添加到环境变量的path里面。</p></div><h2 id="参数说明" tabindex="-1"><a class="header-anchor" href="#参数说明" aria-hidden="true">#</a> 参数说明</h2><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>type</td><td>自定义的类型名称</td></tr><tr><td>output</td><td>生成代码的文件名，默认名是{type}_string.go</td></tr><tr><td>linecomment</td><td>使用常量所在行的备注，作为打印输出的信息</td></tr><tr><td>trimprefix</td><td>去掉常量名的前缀</td></tr></tbody></table><blockquote><p><code>type</code>指定了需要generate的对象，后面加文件名的话，就是指定对象所在的文件名</p><p><code>stringer -type=Pill pill.go</code></p></blockquote><h2 id="使用案例" tabindex="-1"><a class="header-anchor" href="#使用案例" aria-hidden="true">#</a> 使用案例</h2><h3 id="简单案例" tabindex="-1"><a class="header-anchor" href="#简单案例" aria-hidden="true">#</a> 简单案例</h3><p>创建一个Pill类型</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> painkiller

<span class="token keyword">type</span> Pill <span class="token builtin">int</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
	Placebo Pill <span class="token operator">=</span> <span class="token boolean">iota</span>
	Aspirin
	Ibuprofen
	Paracetamol
	Acetaminophen <span class="token operator">=</span> Paracetamol
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行命令<code>stringer -type=Pill</code></p><p>在同一目录中，将创建pill_string.go文件，内容如下：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;strconv&quot;</span>

<span class="token keyword">func</span> <span class="token boolean">_</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// An &quot;invalid array index&quot; compiler error signifies that the constant values have changed.</span>
    <span class="token comment">// Re-run the stringer command to generate them again.</span>
    <span class="token keyword">var</span> x <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Placebo<span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Aspirin<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Ibuprofen<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>
    <span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Paracetamol<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> _Pill_name <span class="token operator">=</span> <span class="token string">&quot;PlaceboAspirinIbuprofenParacetamol&quot;</span>

<span class="token keyword">var</span> _Pill_index <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">uint8</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>i Pill<span class="token punctuation">)</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> i <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">&gt;=</span> <span class="token function">Pill</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>_Pill_index<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Pill(&quot;</span> <span class="token operator">+</span> strconv<span class="token punctuation">.</span><span class="token function">FormatInt</span><span class="token punctuation">(</span><span class="token function">int64</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> _Pill_name<span class="token punctuation">[</span>_Pill_index<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>_Pill_index<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>String()方法将Pill常量的值转换为相应常量名称的字符串表示，因此调用fmt.Print（painkiller.Aspirin）将打印字符串“Aspirin”。</p><p>通常，此过程将使用go generate运行，如下所示：</p><p><code>//go:generate stringer -type=Pill</code></p><h3 id="使用注释" tabindex="-1"><a class="header-anchor" href="#使用注释" aria-hidden="true">#</a> 使用注释</h3><p>我们在创建常量时可以给常量加注释，使用stringer命令生成代码时可以用注释作为输出字符串。</p><p>创建Pill类型</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> painkiller

<span class="token comment">//go:generate stringer -type=Pill -linecomment</span>
<span class="token keyword">type</span> Pill <span class="token builtin">int</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
	Placebo Pill <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">// 安慰剂</span>
	Aspirin <span class="token comment">// 阿司匹林</span>
	Ibuprofen <span class="token comment">// 布洛芬</span>
	Paracetamol <span class="token comment">// 扑热息痛</span>
	Acetaminophen <span class="token operator">=</span> Paracetamol
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行命令</p><p><code>//go:generate stringer -type=Pill -linecomment</code></p><p>生成代码如下：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;strconv&quot;</span>

<span class="token keyword">func</span> <span class="token boolean">_</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// An &quot;invalid array index&quot; compiler error signifies that the constant values have changed.</span>
	<span class="token comment">// Re-run the stringer command to generate them again.</span>
	<span class="token keyword">var</span> x <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Placebo<span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">]</span>
	<span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Aspirin<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
	<span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Ibuprofen<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>
	<span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Paracetamol<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> _Pill_name <span class="token operator">=</span> <span class="token string">&quot;安慰剂阿司匹林布洛芬扑热息痛&quot;</span>

<span class="token keyword">var</span> _Pill_index <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">uint8</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>i Pill<span class="token punctuation">)</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> i <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">&gt;=</span> <span class="token function">Pill</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>_Pill_index<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;Pill(&quot;</span> <span class="token operator">+</span> strconv<span class="token punctuation">.</span><span class="token function">FormatInt</span><span class="token punctuation">(</span><span class="token function">int64</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> _Pill_name<span class="token punctuation">[</span>_Pill_index<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>_Pill_index<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此时调用fmt.Print（painkiller.Aspirin）将打印字符串“阿司匹林”。</p><h3 id="去掉常量名前缀" tabindex="-1"><a class="header-anchor" href="#去掉常量名前缀" aria-hidden="true">#</a> 去掉常量名前缀</h3><p>如果常量名称都包含<code>Pill</code>前缀的话，<code>-trimprefix</code>选项会在生成代码时，去掉<code>Pill</code>前缀。如<code>PillPlacebo</code>、<code>PillAspirin</code>等变量，在String()输出时会去掉前缀。去掉前缀是在生成代码时，去掉前缀，而不是调用<code>String()</code>的时候过滤掉前缀。</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">//go:generate stringer -type Pill -trimprefix Pill </span>
<span class="token keyword">type</span> Pill <span class="token builtin">int</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
	PillPlacebo   Pill <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">// 安慰剂</span>
	PillAspirin               <span class="token comment">// 阿司匹林</span>
	Ibuprofen                 <span class="token comment">// 布洛芬</span>
	Paracetamol               <span class="token comment">// 扑热息痛</span>
	Acetaminophen <span class="token operator">=</span> Paracetamol
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><div class="custom-container tip"><p class="custom-container-title">提示</p><p>stringer 命令只能处理整型的数据类型</p></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">最后更新时间: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: thomas@deepscm.com">thomas</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-aae02a9f.js" defer></script>
  </body>
</html>
